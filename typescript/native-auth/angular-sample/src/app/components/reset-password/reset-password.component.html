<div class="auth-container">
  <h2>Reset Password</h2>
  <form (ngSubmit)="startReset()" *ngIf="!isReset">
    <input type="email" [(ngModel)]="email" name="email" placeholder="Email" required [readonly]="showCode || showNewPassword" />
    <div *ngIf="showCode">
      <input type="text" [(ngModel)]="code" name="code" placeholder="OTP Code" required />
      <button type="button" (click)="submitCode()" [disabled]="loading">{{ loading ? 'Verifying...' : 'Verify Code' }}</button>
    </div>
    <div *ngIf="showNewPassword">
      <input type="password" [(ngModel)]="newPassword" name="newPassword" placeholder="New Password" required />
      <button type="button" (click)="submitNewPassword()" [disabled]="loading">{{ loading ? 'Submitting...' : 'Submit New Password' }}</button>
    </div>
    <button *ngIf="!showCode && !showNewPassword" type="submit" [disabled]="loading">{{ loading ? 'Resetting...' : 'Reset Password' }}</button>
  </form>
  <div class="error" *ngIf="error">{{ error }}</div>
  <div *ngIf="isReset">
    <p>Password reset successful! You can now sign in.</p>
  </div>
</div>
